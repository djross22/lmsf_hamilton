// {{{ 2 "SubmethodForwardDeclaration" ""
private function CalculateOutputs(  ) void ;
private function CleanUp(  ) void ;
private function DebuggingPause(  ) void ;
private function GetParams(  ) void ;
private function SaveWorklistAndMetadata(  ) void ;
private function StartUp(  ) void ;
function OnAbort(  ) void ;
// }} ""
// {{{ 5 "OnAbort" "Begin"
function OnAbort(  ) void {
// }} ""
// {{ 5 "OnAbort" "InitLocals"
// }} ""
// {{{ 197 1 0 "3274d9bb_d8d9_425b_9b6871c3b10b4f2e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
CleanUp();
// }} ""
// {{{ 5 "OnAbort" "End"
}
// }} ""
// {{{ 5 "CleanUp" "Begin"
private function CleanUp(  ) void {
// }} ""
// {{ 5 "CleanUp" "InitLocals"
// }} ""
// {{ 66 1 0 "c9bc5896_28bc_499f_8f7758730b2fdd90" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("***************************************************************************\nCleanUp() submethod\n***************************************************************************"));
// }} ""
// {{ 67 1 0 "f0d64616_5356_4f53_aa9c0e25816cc76f" "ML_STAR:{2931977C-E32F-4471-8B68-F31ED1A866F5}"
{
	variable arrRetValues[];
	arrRetValues = ML_STAR._2931977C_E32F_4471_8B68_F31ED1A866F5("f0d64616_5356_4f53_aa9c0e25816cc76f"); // LockFrontCover
}
// }} ""
// {{ 68 1 0 "493d3876_d549_423a_aefe06ff17a4e8e3" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 69 1 0 "d8b3be5c_0e79_400e_a699431ad532c301" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TipCount::Write2(ML_STAR.MlStar50ulTipWithFilter, "tip_counter_50", ML_STAR);
// }} ""
// {{{ 70 1 0 "cc679522_2a00_46af_9ceef26a9174e932" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TipCount::Write2(ML_STAR.MlStar300ulStandardVolumeTipWithFilter, "tip_counter_300", ML_STAR);
// }} ""
// {{{ 71 1 0 "7876ee25_2480_4ce8_8797a0813257a502" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TipCount::Write2(ML_STAR.MlStar1000ulHighVolumeTipWithFilter, "tip_counter_1000", ML_STAR);
// }} ""
// {{ 72 1 0 "493d3876_d549_423a_aefe06ff17a4e8e3" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "CleanUp" "End"
}
// }} ""
// {{{ 5 "StartUp" "Begin"
private function StartUp(  ) void {
// }} ""
// {{ 5 "StartUp" "InitLocals"
// }} ""
// {{ 187 1 0 "0681c32a_edc8_48cd_ad1de1b591afbf3c" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("***************************************************************************\nStart StartUp() submethod\n***************************************************************************"));
// }} ""
// {{ 188 1 0 "04707f9e_cd92_45fe_a6e747564418ca9b" "ML_STAR:{1C0C0CB0-7C87-11D3-AD83-0004ACB1DCB2}"
{
	variable arrRetValues[];
	arrRetValues = ML_STAR._1C0C0CB0_7C87_11D3_AD83_0004ACB1DCB2("04707f9e_cd92_45fe_a6e747564418ca9b"); // Initialize
}
// }} ""
// {{ 189 1 0 "cbbc0dcb_5c96_421b_944f9f3c9ae252c2" "ML_STAR:{EA251BFB-66DE-48D1-83E5-6884B4DD8D11}"
{
	variable arrRetValues[];
	arrRetValues = ML_STAR._EA251BFB_66DE_48D1_83E5_6884B4DD8D11("cbbc0dcb_5c96_421b_944f9f3c9ae252c2"); // MoveAutoLoad
}
// }} ""
// {{ 190 1 0 "43a47775_6fad_4bd8_bbdcf15010c9aea1" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 191 1 0 "5ece4d2b_621c_424f_baf3187c79ec446f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TipCount::Read2(ML_STAR.MlStar50ulTipWithFilter, Translate("tip_counter_50"), ML_STAR);
// }} ""
// {{{ 192 1 0 "6646dd27_f015_430e_8c52bfce5c82377a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TipCount::Read2(ML_STAR.MlStar300ulStandardVolumeTipWithFilter, Translate("tip_counter_300"), ML_STAR);
// }} ""
// {{{ 193 1 0 "ed7a4866_7fbf_4e2b_9492b07f824056de" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TipCount::Read2(ML_STAR.MlStar1000ulHighVolumeTipWithFilter, Translate("tip_counter_1000"), ML_STAR);
// }} ""
// {{ 194 1 0 "43a47775_6fad_4bd8_bbdcf15010c9aea1" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 195 1 0 "ece35f81_2773_4857_8c03ba1a40ceec15" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("***************************************************************************\nEnd StartUp() submethod\n***************************************************************************"));
// }} ""
// {{{ 5 "StartUp" "End"
}
// }} ""
// {{{ 5 "DebuggingPause" "Begin"
private function DebuggingPause(  ) void {
// }} ""
private dialog dialogHandleB8864FDEFE234f8b9D770F86CA85902F;
// {{ 5 "DebuggingPause" "InitLocals"
// }} ""
// {{ 74 1 0 "4af2a8fd_9649_4f7a_9048ca4eca95cc31" "{21E07B31-8D2E-11d4-A3B8-002035848439}"
dialogHandleB8864FDEFE234f8b9D770F86CA85902F.SetOutput(Translate("Click 'OK' to continue."));
dialogHandleB8864FDEFE234f8b9D770F86CA85902F.ShowOutput("", hslOKOnly | hslInformation | hslDefButton1, hslInfinite);
// }} ""
// {{{ 5 "DebuggingPause" "End"
}
// }} ""
// {{{ 5 "GetParams" "Begin"
private function GetParams(  ) void {
// }} ""
private variable dilution_factor_str;
private variable loc;
private variable loopCounter2;
private variable read_line;
private variable culture_volume_str;
private file file1;
private variable split_line[];
private variable plasmid_key;
private variable well_id;
private variable has_key;
private variable plasmid_id;
private variable loopCounter1;
private variable media_key;
private variable media_type_arr[];
private variable media_type;
private variable loopCounter3;
private variable media_id;
private variable has_media_key;
private dialog dialogHandle1;
private variable media_source_col;
private variable loopCounter_str;
// {{ 5 "GetParams" "InitLocals"
// }} ""
// {{ 76 1 0 "80d5c3b6_e7e3_48ef_9c112647ccc2ccaf" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("***************************************************************************\nStart GetParams() submethod\n***************************************************************************"));
// }} ""
// {{{ 77 1 0 "1a3db046_be2d_41af_b74b70f94b34c61e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Dictionary::CreateDictionary(Translate("param_dict"), 2);
// }} ""
// {{ 78 1 0 "fd2975b6_ee73_42ae_b74a49b3e609c661" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
file1.AddField(1, read_line, hslString);
file1.SetDelimiter(hslAsciiText);
if( 0 == file1.Open("C:\\Program Files (x86)\\HAMILTON\\LMSF_FrontEnd\\parameters.csv", hslRead) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, "C:\\Program Files (x86)\\HAMILTON\\LMSF_FrontEnd\\parameters.csv", "HxMetEdCompCmd");
}
// }} ""
// {{ 79 1 0 "ae5c3c1e_1f2e_4029_bff64d9743c074d0" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
loopCounter2 = 0;
while (
   (file1.Eof() == 0)
)
{
loopCounter2 = loopCounter2 + 1;
// }} ""
// {{ 80 1 0 "c627cbcf_ad59_4fef_8b137d26183e429d" "{B31F3536-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == file1.ReadRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1490157312, MECC::IDS::stepNameFileRead, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{{ 81 1 0 "50a21467_38b1_487f_918fd5ee9bdfe55c" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
loc = StrFind(read_line, ",");
// }} ""
// {{ 82 1 0 "adf5a0ec_6fad_4a7b_9a440e00c72150f2" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (loc > 0)
{
// }} ""
// {{{ 83 1 0 "ba05763a_90fd_4905_964dff7232fb4fad" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
split_line = HSLExtensions::String::Split(read_line, Translate(","), 1);
// }} ""
// {{{ 84 1 0 "695c4cb5_7a18_4634_bf732c8e58d8fc20" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Dictionary::AddItem(Translate("param_dict"), split_line.ElementAt( 1 -1), split_line.ElementAt( 2 -1));
// }} ""
// {{ 85 1 0 "adf5a0ec_6fad_4a7b_9a440e00c72150f2" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 86 1 0 "ae5c3c1e_1f2e_4029_bff64d9743c074d0" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 87 1 0 "54a3aeb8_edb1_47ca_a75a3b46226de584" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != file1.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
file1.RemoveFields();
// }} ""
// {{{ 88 1 0 "7a1490b2_b529_4dd4_b8ea9adaed71e0fd" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
worklist_file_path = HSLExtensions::Dictionary::GetItem(Translate("param_dict"), Translate("worklistFile"));
// }} ""
// {{ 89 1 0 "547e7680_b7f4_4b44_89b7054738114d58" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 90 1 0 "d7e0357f_156c_4733_999115b99c976dd1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strain_1_id = HSLExtensions::Dictionary::GetItem(Translate("param_dict"), Translate("strain1"));
// }} ""
// {{{ 91 1 0 "e6c9a08e_f56b_447a_bd2e6f9b3fa3c00a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
plasmid_id = HSLExtensions::Dictionary::GetItem(Translate("param_dict"), Translate("plasmid_B1"));
// }} ""
// {{ 92 1 0 "7bc29762_8297_40cc_ac6410aa5b023e83" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 93 1 0 "c3bf33f7_4ee4_4298_a50e5f258199c906" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Dictionary::CreateDictionary(Translate("plasmid_by_well_dict"), 2);
// }} ""
// {{ 94 1 0 "c2f6d38b_da82_4b61_a71ece0a145b4e21" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
loopCounter2 = 0;
ML_STAR.Growth_Plate.SetCurrentPosition(1);
while (
   (ML_STAR.Growth_Plate.GetCurrentPosition() > 0)
)
{
AlignSequences(hslTrue, ML_STAR.Growth_Plate, 1);
loopCounter2 = loopCounter2 + 1;
// }} ""
// {{{ 95 1 0 "6b9e778c_85b3_4db0_bbf7556e3667b06f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
well_id = SeqGetPositionId(ML_STAR.Growth_Plate);
// }} ""
// {{{ 96 1 0 "71482ab6_6b29_45b2_b2bb07d14f03e68d" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
plasmid_key = StrConcat2(Translate("plasmid_"), well_id);
// }} ""
// {{{ 97 1 0 "986bc91c_4df9_4bf4_99d2da30bccda466" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
has_key = HSLExtensions::Dictionary::ExistsItem(Translate("param_dict"), plasmid_key);
// }} ""
// {{ 98 1 0 "0f11814a_3b19_420c_9a0f33ac7b63448b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (has_key == 1)
{
// }} ""
// {{{ 99 1 0 "eea73c1e_bad1_439e_8582bfb37c3b163f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
plasmid_id = HSLExtensions::Dictionary::GetItem(Translate("param_dict"), plasmid_key);
// }} ""
// {{ 100 1 0 "ca5bb220_d60a_4a6d_8bb728d7c476a015" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (plasmid_id != "none")
{
// }} ""
// {{{ 101 1 0 "cff46f4c_eec6_4460_9e9c52ca9e714a2f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Dictionary::AddItem(Translate("plasmid_by_well_dict"), well_id, plasmid_id);
// }} ""
// {{{ 102 1 0 "506b768f_9d58_493f_bef31bef14754168" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
TrcTrace4(Translate("well_id: "), well_id, Translate(", plasmid_id: "), plasmid_id);
// }} ""
// {{ 103 1 0 "ca5bb220_d60a_4a6d_8bb728d7c476a015" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 104 1 0 "0f11814a_3b19_420c_9a0f33ac7b63448b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 105 1 0 "e03323b2_df04_47e4_92ecace6d07c3ac0" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqIncrement(ML_STAR.Growth_Plate, 1);
// }} ""
// {{ 106 1 0 "c2f6d38b_da82_4b61_a71ece0a145b4e21" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
if (
   (ML_STAR.Growth_Plate.GetCurrentPosition() > 0 && ML_STAR.Growth_Plate.GetMax() == 0 )
)
{ MECC::EndlessSequenceLoopWarning(GetFileName()); }

}
ML_STAR.Growth_Plate.SetMax(ML_STAR.Growth_Plate.GetTotal());
ML_STAR.Growth_Plate.SetCurrentPosition(1);
}
// }} ""
// {{ 107 1 0 "ece4dbef_3085_4912_8d0b7d856addb1cf" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 108 1 0 "e1543f8f_0789_4f9c_aa96ab610e269591" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
culture_volume_str = HSLExtensions::Dictionary::GetItem(Translate("param_dict"), Translate("cultureVolume"));
// }} ""
// {{{ 109 1 0 "0c36cc95_4bc8_445e_806167bfaf7c5674" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
culture_volume = StrFVal(culture_volume_str);
// }} ""
// {{ 110 1 0 "af3cc228_db13_4d21_86fe0774752fe540" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (culture_volume > 500)
{
// }} ""
// {{ 111 1 0 "e0b11998_110e_4b45_b187478cbde9b779" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
culture_volume = 500;
// }} ""
// {{ 112 1 0 "af3cc228_db13_4d21_86fe0774752fe540" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 113 1 0 "6baab18d_bb9f_4c6a_af55b94042ea385a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (culture_volume < 200)
{
// }} ""
// {{ 114 1 0 "16c4e0df_5409_4261_bced7a3970c14409" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
culture_volume = 200;
// }} ""
// {{ 115 1 0 "6baab18d_bb9f_4c6a_af55b94042ea385a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 116 1 0 "af3cc228_db13_4d21_86fe0774752fe540" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 117 1 0 "80c37012_b4eb_43b9_a205cb3a63bd2a58" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 118 1 0 "7f153486_ad9a_434e_bb6f015ded7e9295" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
dilution_factor_str = HSLExtensions::Dictionary::GetItem(Translate("param_dict"), Translate("cultureDilutionFactor"));
// }} ""
// {{{ 119 1 0 "b31eca86_ed1e_4a5c_86001e71ddbbfda9" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
dilution_factor = StrFVal(dilution_factor_str);
// }} ""
// {{ 120 1 0 "194fdee6_17a7_4232_9bebecfe7adf7cec" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 121 1 0 "cd676d84_b01e_4ff7_aca652f911c8220a" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
media_type_arr.SetSize(0);
// }} ""
// {{ 122 1 0 "9667a621_6894_4b80_b65fa448af513ede" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 123 1 0 "be0830fd_8bbd_4214_81e96dd5023d119e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Dictionary::CreateDictionary(Translate("media_source_dict"), 2);
// }} ""
// {{ 124 1 0 "2b80d335_3735_4681_b9d82b49e94b4f3e" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(loopCounter1 = 0; loopCounter1 < 4;)
{
loopCounter1 = loopCounter1 + 1;
// }} ""
// {{{ 125 1 0 "73a92da3_de95_4fff_ad07033636b67765" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
media_key = StrConcat2(Translate("media_source_"), loopCounter1);
// }} ""
// {{{ 126 1 0 "18080162_1f31_46f4_9801f9a09ee468f8" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
media_type = HSLExtensions::Dictionary::GetItem(Translate("param_dict"), media_key);
// }} ""
// {{ 127 1 0 "ab0247d1_06ce_4011_a77fbf3ce6f41ea4" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
media_type_arr.AddAsLast(media_type);
// }} ""
// {{{ 128 1 0 "2794648b_424f_40fe_92b63a48b7c999e4" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Dictionary::AddItem(Translate("media_source_dict"), media_type, loopCounter1);
// }} ""
// {{ 129 1 0 "2b80d335_3735_4681_b9d82b49e94b4f3e" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 130 1 0 "796bf8e9_1922_4f92_be96b9a9f10c7aff" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 131 1 0 "cd55549a_0dd1_4f6b_804ea8605f7732ec" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 132 1 0 "fe0b2238_42b3_4858_b5eae1c808781482" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
media_source_for_col_arr.SetSize(0);
// }} ""
// {{ 133 1 0 "ace03bfd_c900_4881_b65137dfbdf0a2a8" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 134 1 0 "e77eb756_07e2_4d62_b7f045c32fa6069c" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Dictionary::CreateDictionary(Translate("media_id_by_column_dict"), 2);
// }} ""
// {{ 135 1 0 "ed0afc4a_bc96_4450_88b506bc7b8737da" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(loopCounter3 = 0; loopCounter3 < 12;)
{
loopCounter3 = loopCounter3 + 1;
// }} ""
// {{{ 136 1 0 "dc184366_63f7_4ea7_bc220b1afdcb267e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
loopCounter_str = StrIStr(loopCounter3);
// }} ""
// {{{ 137 1 0 "74ca1db5_b8b4_4bc6_bc6eb2e631b3690f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
media_key = StrConcat2(Translate("media_"), loopCounter3);
// }} ""
// {{{ 138 1 0 "49e89d05_11bf_4d91_834d83500278d5e3" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
has_key = HSLExtensions::Dictionary::ExistsItem(Translate("param_dict"), media_key);
// }} ""
// {{ 139 1 0 "6de998e4_89f6_404c_908be3042558cdb2" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (has_key == 1)
{
// }} ""
// {{{ 140 1 0 "e45b2669_afb4_4baa_bb1973f2d2be3ba3" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
media_id = HSLExtensions::Dictionary::GetItem(Translate("param_dict"), media_key);
// }} ""
// {{ 141 1 0 "0220df09_2de1_4174_8aa6c3de9bbf1f4e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (media_id != "none")
{
// }} ""
// {{{ 142 1 0 "21ff42df_e30c_4b36_9c1d4ebf7b9c5f4b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
has_media_key = HSLExtensions::Dictionary::ExistsItem(Translate("media_source_dict"), media_id);
// }} ""
// {{ 143 1 0 "eb87e479_ee3a_4ded_a2e5c7b5d34759ba" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (has_media_key == 1)
{
// }} ""
// {{{ 144 1 0 "cb966fc1_b65e_4103_90f78f3e3d79f12e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
media_source_col = HSLExtensions::Dictionary::GetItem(Translate("media_source_dict"), media_id);
// }} ""
// {{ 145 1 0 "2aad34aa_7a94_4518_880ed8aa88f7f136" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
media_source_for_col_arr.AddAsLast(media_source_col);
// }} ""
// {{{ 146 1 0 "7339e4d5_2f0f_407b_a0dca0574c8de4f1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Dictionary::AddItem(Translate("media_id_by_column_dict"), loopCounter_str, media_id);
// }} ""
// {{ 147 1 0 "eb87e479_ee3a_4ded_a2e5c7b5d34759ba" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 148 1 0 "f6f639f6_6b9e_40ba_b3ba0b80eb9cdb86" "{21E07B31-8D2E-11d4-A3B8-002035848439}"
dialogHandle1.SetOutput(Translate("The media type for "), media_key, Translate(", "), media_id, Translate(" was not listed in the input file as a 'media_source_n' type."), Translate("So, no media will be added to column "), "\n", loopCounter3, Translate(" of the Growth Plate."));
dialogHandle1.ShowOutput(Translate("Media ID not found!"), hslOKOnly | hslInformation | hslDefButton1, hslInfinite);
// }} ""
// {{ 149 1 0 "267067f6_b81a_4df2_a94a816c32d57d19" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
media_source_for_col_arr.AddAsLast(0);
// }} ""
// {{{ 150 1 0 "d98b565d_e55e_4624_95e307bff8103f44" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Dictionary::AddItem(Translate("media_id_by_column_dict"), loopCounter_str, Translate("none"));
// }} ""
// {{ 151 1 0 "eb87e479_ee3a_4ded_a2e5c7b5d34759ba" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 152 1 0 "0220df09_2de1_4174_8aa6c3de9bbf1f4e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 153 1 0 "54453419_ab3c_4c88_ad982d88f628cd46" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
media_source_for_col_arr.AddAsLast(0);
// }} ""
// {{{ 154 1 0 "c0dc60b9_33a1_48f9_b3031d2d21ecd63b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::Dictionary::AddItem(Translate("media_id_by_column_dict"), loopCounter_str, Translate("none"));
// }} ""
// {{ 155 1 0 "0220df09_2de1_4174_8aa6c3de9bbf1f4e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 156 1 0 "6de998e4_89f6_404c_908be3042558cdb2" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 157 1 0 "ed0afc4a_bc96_4450_88b506bc7b8737da" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 158 1 0 "79674314_73c6_4f22_aff8a0af63a7ecac" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("***************************************************************************\nEnd GetParams() submethod\n***************************************************************************"));
// }} ""
// {{{ 5 "GetParams" "End"
}
// }} ""
// {{{ 5 "CalculateOutputs" "Begin"
private function CalculateOutputs(  ) void {
// }} ""
// {{ 5 "CalculateOutputs" "InitLocals"
// }} ""
// {{ 64 1 0 "30dfa6ee_cd6c_4be0_87031e4c0ac25ae2" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("**** CalculateOutputs sub-method ****"));
// }} ""
// {{{ 5 "CalculateOutputs" "End"
}
// }} ""
// {{{ 5 "SaveWorklistAndMetadata" "Begin"
private function SaveWorklistAndMetadata(  ) void {
// }} ""
private variable iniFilePath;
private variable row_id;
private variable well_id;
private variable plasmid;
private variable strain;
private variable position;
private variable column_id;
private variable column_id_str;
private variable iniDir;
private variable loopCounter2;
private variable iniExists;
private file file1;
private variable media_id;
// {{ 5 "SaveWorklistAndMetadata" "InitLocals"
// }} ""
// {{ 160 1 0 "03792027_eb0a_4d25_8cd0e0dfc27cc264" "{F07B0071-8EFC-11d4-A3BA-002035848439}"
MECC::TraceComment(Translate("**** SaveWorklist sub-method ****"));
// }} ""
// {{ 161 1 0 "d6e7fd8c_1012_4c83_89aa867afa844906" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 162 1 0 "6a83aae6_c771_46a6_b339d219f92ce2f8" "{B31F3534-5D80-11d4-A5EB-0050DA737D89}"
file1.AddField("position", position, hslInteger);
file1.AddField("well", well_id, hslString, 255);
file1.AddField("row", row_id, hslString, 255);
file1.AddField("column", column_id, hslInteger);
file1.AddField("media", media_id, hslString, 255);
file1.AddField("strain", strain, hslString, 255);
file1.AddField("plasmid", plasmid, hslString, 255);
file1.SetDelimiter(hslCSVDelimited);
if( 0 == file1.Open(worklist_file_path, hslWrite) )
{
    MECC::RaiseRuntimeErrorEx(-1523711743, MECC::IDS::stepNameFileOpen, MECC::IDS::errorStepFileOpenFailed, worklist_file_path, "HxMetEdCompCmd");
}
// }} ""
// {{ 163 1 0 "a53157fd_76a1_4ccd_a834ceb7e706c14c" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
loopCounter2 = 0;
ML_STAR.Growth_Plate.SetCurrentPosition(1);
while (
   (ML_STAR.Growth_Plate.GetCurrentPosition() > 0)
)
{
AlignSequences(hslTrue, ML_STAR.Growth_Plate, 1);
loopCounter2 = loopCounter2 + 1;
// }} ""
// {{ 164 1 0 "f4b0fb8a_bdff_4b0d_b5e55b61ff11d36f" "{B31F353B-5D80-11d4-A5EB-0050DA737D89}"
position = ML_STAR.Growth_Plate.GetCurrentPosition();
// }} ""
// {{{ 165 1 0 "d244d8f9_57ce_4925_b88af547033812bd" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
well_id = SeqGetPositionId(ML_STAR.Growth_Plate);
// }} ""
// {{{ 166 1 0 "5d312a58_d1e7_4e3f_bdb9f59b7d3fabd0" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
row_id = StrLeft(well_id, 1);
// }} ""
// {{{ 167 1 0 "233a2f25_7bd6_4d3c_812f33e2613dd183" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
column_id_str = StrMid(well_id, 1, 2);
// }} ""
// {{{ 168 1 0 "2bfd915e_aeec_463f_839929c02214ca4e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
column_id = StrIVal(column_id_str);
// }} ""
// {{{ 169 1 0 "d50f6b91_a629_445f_9973cc6d346ce431" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
media_id = HSLExtensions::Dictionary::GetItem(Translate("media_id_by_column_dict"), column_id_str);
// }} ""
// {{ 170 1 0 "038fe8ac_6700_468a_b7067e48bb102fb2" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 171 1 0 "13f58ca1_3064_4547_a38786b6037a80c4" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 172 1 0 "e252f738_e5f0_4040_8df441a72f98810b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strain = SeqGetProperty(ML_STAR.Growth_Plate, position, Translate("strain"));
// }} ""
// {{{ 173 1 0 "3959769d_40e6_4167_b93d32f2f8ad660e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
plasmid = SeqGetProperty(ML_STAR.Growth_Plate, position, Translate("plasmid"));
// }} ""
// {{ 174 1 0 "b081fce2_5f18_4dc3_bb267e2dacbaad9c" "{B31F3537-5D80-11d4-A5EB-0050DA737D89}"
if( 0 == file1.WriteRecord() )
{
    MECC::RaiseRuntimeErrorEx(-1473380096, MECC::IDS::stepNameFileWrite, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
// }} ""
// {{{ 175 1 0 "44b92027_bbcb_46d2_9cb73c820efaf4b2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqIncrement(ML_STAR.Growth_Plate, 1);
// }} ""
// {{ 176 1 0 "a53157fd_76a1_4ccd_a834ceb7e706c14c" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
if (
   (ML_STAR.Growth_Plate.GetCurrentPosition() > 0 && ML_STAR.Growth_Plate.GetMax() == 0 )
)
{ MECC::EndlessSequenceLoopWarning(GetFileName()); }

}
ML_STAR.Growth_Plate.SetMax(ML_STAR.Growth_Plate.GetTotal());
}
// }} ""
// {{ 177 1 0 "effc682b_9658_4b10_85539bd837fe96c0" "{B31F3538-5D80-11d4-A5EB-0050DA737D89}"
if( 0 != file1.Close() )
{
    MECC::RaiseRuntimeErrorEx(-1456602880, MECC::IDS::stepNameFileClose, MECC::IDS::errorStepFailed, "", "HxMetEdCompCmd");
}
file1.RemoveFields();
// }} ""
// {{ 178 1 0 "d05abd48_8b26_4be0_b1c9482516f6eee0" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 179 1 0 "1ef7ebaf_857d_4285_9a1f890e512e6a75" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
iniDir = HSLExtensions::File::GetDirectoryName(worklist_file_path);
// }} ""
// {{ 180 1 0 "def8d1f3_8c55_4788_83500787d118a58c" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
iniFilePath = iniDir + "\\schema.ini";
// }} ""
// {{{ 181 1 0 "8514a401_d3f7_4ae8_8da61dab6878864b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
iniExists = HSLExtensions::File::Exists(iniFilePath);
// }} ""
// {{ 182 1 0 "19e68232_fcdc_47ff_8783c08c1a65061b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (iniExists == 1)
{
// }} ""
// {{{ 183 1 0 "5cacbb3c_623d_4797_b58cc652f573c8b7" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
HSLExtensions::File::Delete(iniFilePath);
// }} ""
// {{ 184 1 0 "19e68232_fcdc_47ff_8783c08c1a65061b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 185 1 0 "d6e7fd8c_1012_4c83_89aa867afa844906" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "SaveWorklistAndMetadata" "End"
}
// }} ""
/* {{ 2 "SubmethodInsertLine" "" */ // }} ""
// $$author=djross$$valid=0$$time=2024-06-13 15:08$$checksum=7a97475a$$length=085$$